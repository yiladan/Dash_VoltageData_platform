# Dashâ€”äº¤äº’å¼æ•°æ®å¯è§†åŒ–æ­å»º
ä¾é ç€è–„å¼±çš„pythonåŸºç¡€ï¼Œå¸Œæœ›æ­å»ºä¸€ä¸ªèƒ½å¤Ÿåº”ç”¨çš„æ•°æ®åˆ†æå·¥å…·ï¼Œè€Œä¸æ˜¯éœ€è¦å®‰è£…pythonã€é…ç½®ç¯å¢ƒçš„è„šæœ¬æ–‡ä»¶ğŸ§‘â€ğŸ’»ã€‚ç¢°å·§çš„æ˜¯ï¼Œåœ¨ç½‘ä¸Šçœ‹plotlyç”»å›¾çš„æ—¶å€™ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªæœ‰è¶£çš„æ•°æ®å¯è§†åŒ–webï¼›ä¾é™„äºFlaskçš„è½»é‡çº§webæ¡†æ¶ï¼Œç»“åˆplotlyæ•°æ®å¯è§†åŒ–çš„åŠŸèƒ½ï¼ŒDashå°±å‡ºæ¥äº†ğŸ˜

## Dashç®€ä»‹ğŸš©
Dashæ˜¯ä¸€ä¸ªç”¨äºæ„å»ºWebåº”ç”¨ç¨‹åºçš„é«˜æ•ˆPythonæ¡†æ¶ã€‚

Dashå†™åœ¨Flaskï¼ŒPlotly.jså’ŒReact.jsä¹‹ä¸Šï¼Œéå¸¸é€‚åˆåœ¨çº¯Pythonä¸­ï¼Œä½¿ç”¨é«˜åº¦è‡ªå®šä¹‰çš„ç”¨æˆ·ç•Œé¢ï¼Œæ„å»ºæ•°æ®å¯è§†åŒ–åº”ç”¨ç¨‹åºã€‚å®ƒç‰¹åˆ«é€‚åˆä½¿ç”¨Pythonè¿›è¡Œæ•°æ®åˆ†æçš„äººã€‚

é€šè¿‡å‡ ä¸ªç®€å•çš„æ¨¡å¼ï¼ŒDashæŠ½è±¡å‡ºæ„å»ºåŸºäºWebçš„äº¤äº’å¼åº”ç”¨ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰æŠ€æœ¯å’Œåè®®ã€‚

Dashåº”ç”¨ç¨‹åºåœ¨Webæµè§ˆå™¨ä¸­å‘ˆç°ï¼Œå¯ä»¥å°†åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼Œç„¶åé€šè¿‡URLè¿›è¡Œå…±äº«ã€‚

ç”±äºDashåº”ç”¨ç¨‹åºæ˜¯åœ¨Webæµè§ˆå™¨ä¸­è¿›è¡ŒæŸ¥çœ‹ï¼Œå› æ­¤Dashæœ¬è´¨ä¸Šæ˜¯è·¨å¹³å°å’Œç§»åŠ¨ç«¯çš„ã€‚

Dashæ˜¯ä¸€ä¸ªå¼€æºåº“ï¼Œåœ¨è®¸å¯çš„MITä¸‹å‘å¸ƒï¼ŒPlotlyå¼€å‘Dashï¼Œå¹¶æä¾›äº†ä¸€ä¸ªåœ¨ä¼ä¸šç¯å¢ƒä¸­è½»æ¾éƒ¨ç½²Dashåº”ç”¨ç¨‹åºçš„å¹³å°ã€‚

ğŸ³ï¸â€ğŸŒˆDashå®˜ç½‘ï¼š[Dash Documentation & User Guide | Plotly](https://dash.plotly.com/)
ğŸ˜ŒDashä¸»é¢˜æ¡†æ¶ Dash Bootstrap Componentså®˜ç½‘ï¼š
http://dash-bootstrap-components.opensource.faculty.ai/

## Dashä½“ç³»æ¶æ„ 
***
###  ğŸ˜‹Flaskå’ŒReact
Dashåº”ç”¨ç¨‹åºæ˜¯è¿è¡Œ[Flask](https://links.jianshu.com/go?to=http%3A%2F%2Fflask.pocoo.org%2F)ï¼Œå¹¶é€šè¿‡HTTPè¯·æ±‚ä¼ é€’JSONæ•°æ®åŒ…çš„WebæœåŠ¡å™¨ã€‚Dashçš„å‰ç«¯ä½¿ç”¨React.jsæ¸²æŸ“ç»„ä»¶ï¼ŒReact.jsæ˜¯ç”±Facebookç¼–å†™å’Œç»´æŠ¤çš„Javascriptç”¨æˆ·ç•Œé¢åº“ã€‚

Flaskå¾ˆæ£’ï¼Œå·²è¢«Pythonç¤¾åŒºå¹¿æ³›é‡‡ç”¨ï¼Œå¹¶éƒ¨ç½²äºä¼—å¤šç”Ÿäº§ç¯å¢ƒä¸­ã€‚Dashåº”ç”¨çš„å¼€å‘è€…å¯ä»¥è®¾ç½®Flaskçš„åº•å±‚å®ä¾‹å’Œå±æ€§ï¼Œé«˜çº§å¼€å‘è€…è¿˜å¯ä»¥ä½¿ç”¨ä¼—å¤šçš„Flaskæ’ä»¶æ‰©å±•Dashåº”ç”¨ã€‚

Reactä¹Ÿå¾ˆèµï¼Œåœ¨Plotlyï¼Œæˆ‘ä»¬ç”¨Reacté‡å†™äº†å…¨éƒ¨Webå¹³å°å’Œåœ¨çº¿è§†å›¾ç¼–è¾‘å™¨ã€‚Reactæœ€äº†ä¸èµ·çš„ä¸€ç‚¹æ˜¯å®ƒçš„ç¤¾åŒºä½œå“ä¼—å¤šä¸”ä¸ªä¸ªä¼˜ç§€ã€‚Reactçš„å¼€æºç¤¾åŒºå·²ç»å…¬å¸ƒäº†æ•°ä»¥åƒè®¡çš„é«˜è´¨é‡äº¤äº’å¼ç»„ä»¶ï¼ŒåŒ…æ‹¬ä¸‹æ‹‰èœå•ã€æ»‘å—ã€æ—¥å†ï¼Œè¿˜æœ‰äº¤äº’å¼è¡¨æ ¼ç­‰ã€‚

Dashæ•´åˆäº†Flaskä¸Reactçš„å¼ºå¤§åŠŸèƒ½ï¼Œä½¿éä¸“ä¸šWebå¼€å‘çš„Pythonæ•°æ®åˆ†æå¸ˆä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚
***
### ä»React.jsåˆ°Python Dashç»„ä»¶
Dashç»„ä»¶æ˜¯ä¸€ä¸ªç¼–è¯‘Reactç»„ä»¶å±æ€§ä¸å€¼ï¼Œå¹¶å°†ä¹‹ç”ŸæˆJSONåºåˆ—çš„Pythonç±»ã€‚

Dashæä¾›äº†ä¸€ä¸ª[å·¥å…·é›†](https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fplotly%2Fdash-components-archetype)ï¼Œå¯ä»¥è½»æ¾åœ°å°†Reactç»„ä»¶ (Javascriptç¼–å†™) ï¼Œæ‰“åŒ…ä¸ºå¯åœ¨Dashä¸­ä½¿ç”¨çš„ç»„ä»¶ã€‚æ­¤å·¥å…·é›†ä½¿ç”¨åŠ¨æ€ç¼–ç¨‹ï¼Œè‡ªåŠ¨å°†æ³¨é‡Šè¿‡çš„React PropTypeè½¬åŒ–ä¸ºæ ‡å‡†çš„Pythonç±»ã€‚ç”Ÿæˆåçš„Dashç»„ä»¶Pythonç±»å¯¹ç”¨æˆ·å¾ˆå‹å¥½ï¼Œèƒ½è¿›è¡Œè‡ªåŠ¨å‚æ•°éªŒè¯ï¼Œå¹¶ç”Ÿæˆå­—ç¬¦ä¸²ã€‚[ç¼–å†™ç»„ä»¶](https://dash.plotly.com/plugins)
```python
    >>> help(dcc.Dropdown)
    class Dropdown(dash.development.base_component.Component)
     |  A Dropdown component.
     |  Dropdown is an interactive dropdown element for selecting one or more
     |  items.
     |  The values and labels of the dropdown items are specified in the `options`
     |  property and the selected item(s) are specified with the `value` property.
     |
     |  Use a dropdown when you have many options (more than 5) or when you are
     |  constrained for space. Otherwise, you can use RadioItems or a Checklist,
     |  which have the benefit of showing the users all of the items at once.
     |
     |  Keyword arguments:
     |  - id (string; optional)
     |  - className (string; optional)
     |  - disabled (boolean; optional): If true, the option is disabled
     |  - multi (boolean; optional): If true, the user can select multiple values
     |  - options (list; optional)
     |  - placeholder (string; optional): The grey, default text shown when no option is selected
     |  - value (string | list; optional): The value of the input. If `multi` is false (the default)
     |  then value is just a string that corresponds to the values
     |  provided in the `options` property. If `multi` is true, then
     |  multiple values can be selected at once, and `value` is an
     |  array of items with values corresponding to those in the
     |  `options` prop.
     |
     |  Available events: 'change
```
***
### å¹¶å‘-å¤šç”¨æˆ·ä½¿ç”¨
Dashåº”ç”¨ç¨‹åºçš„çŠ¶æ€å­˜å‚¨åœ¨å‰ç«¯(å³Webæµè§ˆå™¨)ä¸­ï¼Œè¿™å…è®¸å¤šä¸ªç”¨æˆ·å¯ä»¥ä½¿ç”¨ç‹¬ç«‹çš„ä¼šè¯ï¼ŒåŒæ—¶ä¸Dashåº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’æ“ä½œã€‚

è¿™ä¸ªä¹Ÿæ˜¯å®é™…åº”ç”¨ä¸­æœ€æ–¹ä¾¿çš„äº†ï¼Œä¸ç”¨è€ƒè™‘å¤šä¸ªç”¨æˆ·åŒæ—¶ä½¿ç”¨çš„æƒ…å†µğŸ¤

###  CSSå’Œé»˜è®¤æ ·å¼
æ ¸å¿ƒåº“æ²¡æœ‰åŒ…å«CSSä¸é»˜è®¤æ ·å¼ï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†æ”¯æŒæ¨¡å—åŒ–å’Œç‹¬ç«‹ç‰ˆæœ¬æ§åˆ¶ï¼Œé¼“åŠ±Dashåº”ç”¨çš„å¼€å‘è€…ï¼Œè‡ªå®šä¹‰å…¶åº”ç”¨ç¨‹åºçš„ç•Œé¢å¤–è§‚ã€‚ç‚¹æ­¤æŸ¥é˜…ç”±Dashæ ¸å¿ƒå›¢é˜Ÿç»´æŠ¤çš„[æ ¸å¿ƒæ ·å¼æŒ‡å—](https://links.jianshu.com/go?to=https%3A%2F%2Fcodepen.io%2Fchriddyp%2Fpen%2FbWLwgP)ã€‚

###  æ•°æ®å¯è§†åŒ–
Dashçš„å›¾å½¢ç»„ä»¶ä½¿ç”¨plotly.jså¯¹å›¾å½¢è¿›è¡Œæ¸²æŸ“ï¼ŒPlotly.jsä¸Dashé…åˆé»˜å¥‘ï¼Œå®ƒä½¿ç”¨å£°æ˜å¼ç¼–ç¨‹æ¨¡å¼ï¼Œå¼€æºä¸”é€Ÿåº¦å¿«ï¼Œè¿˜æ”¯æŒç§‘æŠ€è®¡ç®—ã€é‡‘èã€å•†åŠ¡ç±»çš„å„ç§è§†å›¾ã€‚Plotly.jsåŸºäºD3.jsæ„å»ºï¼Œæ”¯æŒå¯¼å‡ºç¬¦åˆå‡ºç‰ˆæ ‡å‡†çš„é«˜æ¸…çŸ¢é‡å›¾ä¸ä¼˜å…ˆæ€§èƒ½çš„WebGLè§†å›¾ã€‚

Dashçš„å›¾å½¢å…ƒç´ ä¸å¼€æºçš„plotly.pyåº“å…±äº«åŒæ ·çš„è¯­æ³•ï¼Œå¼€å‘è€…å¯ä»¥è½»æ˜“åœ°åœ¨ä¸¤è€…ä¹‹é—´åˆ‡æ¢ã€‚Dashçš„å›¾å½¢ç»„ä»¶ä»plotly.jsäº‹ä»¶ç³»ç»Ÿä¸­å…³è”ä¿¡æ¯ï¼Œå…è®¸å¼€å‘è€…ç¼–å†™å“åº”åœ¨Plotlyå›¾å½¢ä¸­**æ‚¬åœã€ç‚¹å‡»ã€é€‰ç‚¹**ç­‰æ“ä½œçš„åº”ç”¨ã€‚

![aef77db0b3429094dcef5de746bfaf0f.png](aef77db0b3429094dcef5de746bfaf0f.png)

## Dashå®‰è£…
***
æ–°å»ºè™šæ‹Ÿç¯å¢ƒå¹¶æ¿€æ´»ï¼š
```
python -m venv venv
.\venv\Scripts\activate
```
condaåˆ›å»ºæ–°ç¯å¢ƒï¼š
```
conda create -n dash python=3.9.11
```
***
å®‰è£…dashï¼š
```
pip install dash -i https://mirror.baidu.com/pypi/simple
```
å®‰è£…dash-bootstrap-componentsï¼š
```
pip install dash-bootstrap-components -i https://mirror.baidu.com/pypi/simple
```
***

## Dashéƒ¨ç½²
åœ¨Linuxç³»ç»Ÿä¸­ï¼Œdashåº”ç”¨å¯ä»¥ä½¿ç”¨gunicornè¿›è¡Œéƒ¨ç½²ï¼š
[Gunicorn](https://link.zhihu.com/?target=http%3A//gunicorn.org/) (ç‹¬è§’å…½)æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„Python WSGI Server,é€šå¸¸ç”¨å®ƒæ¥è¿è¡Œ wsgi application(ç”±æˆ‘ä»¬è‡ªå·±ç¼–å†™éµå¾ªWSGI applicationçš„ç¼–å†™è§„èŒƒ) æˆ–è€… wsgi framework(å¦‚Django,Paster),åœ°ä½ç›¸å½“äºJavaä¸­çš„Tomcatã€‚

å®‰è£…gunicorn
```
pip install -i https://mirrors.aliyun.com/pypi/simple gunicorn
```
åˆ‡æ¢åˆ°æ–‡ä»¶ç›®å½•ï¼Œè¿è¡Œå‘½ä»¤
```
gunicorn -w 4 -b 0.0.0.0:5000 app:server
```
        -wæ˜¯worker è¿›ç¨‹æ•°ï¼›
        -bæ˜¯åœ°å€å’Œç«¯å£ï¼›
        appæ˜¯æ–‡ä»¶åï¼›
        serveræ˜¯åˆ›å»ºçš„å®ä¾‹ï¼›
åå°è¿è¡Œå‘½ä»¤ï¼š
```
nohup gunicorn -w 4 -b 0.0.0.0:5000 app:server &
```
***
ç”±äºæœ¬äººäºŒæ‰‹æœåŠ¡å™¨æ€§èƒ½å ªå¿§ï¼Œå¯¼è‡´éƒ¨ç½²åè¿˜æ²¡æœ‰æœ¬æœºæµ‹è¯•æ—¶æµç•…ï¼Œåç»­å°è¯•ä½¿ç”¨ä¸€ä¸‹dockeréƒ¨ç½²
***
[nginx gunicornéƒ¨ç½²](https://zhuanlan.zhihu.com/p/141626596)
![fa7bec162de6f6ee975d775c0b8c1884.png](fa7bec162de6f6ee975d775c0b8c1884.png "fa7bec162de6f6ee975d775c0b8c1884.png")



 















 
